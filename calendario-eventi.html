<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Eventi - Sito Azienda</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="script.js" defer></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <a href="index.html">
                <img src="logo.png" alt="Logo Azienda">
            </a>
        </div>
        <nav class="navbar">
            <ul>
                <li><a href="chi-siamo.html">Chi Siamo</a></li>
                <li><a href="produzioni.html" class="active">Produzioni</a></li>
                <li><a href="calendario-eventi.html">Calendario Eventi</a></li>
                <li><a href="soci.html">I nostri soci</a></li>
                <li><a href="spazi.html">I nostri spazi</a></li>
                <li><a href="contattaci.html">Contattaci</a></li>
            </ul>
        </nav>
        <!-- Hamburger menu for mobile -->
        <div class="hamburger" id="hamburger">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <section class="intro">
            <h2>Calendario Eventi</h2>
            <p>Scopri gli eventi in programma per il mese corrente.</p>
        </section>

        <!-- Calendario -->
        <section id="calendar-container">
            <!-- Pulsanti per mese precedente e mese successivo -->
            <button id="prev-month" class="prev-next" disabled>Mese Precedente</button>
            <button id="next-month" class="prev-next">Mese Successivo</button>
            
            <!-- Titolo del mese -->
            <h2 id="calendar-title">Scopri gli eventi di febbraio 2025</h2>

            <!-- Contenitore del calendario -->
            <div id="calendar"></div>

            <!-- Box per visualizzare gli eventi -->
            <div id="event-box" class="event-box"></div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Nome Azienda - Tutti i diritti riservati</p>
        <p class="social-text">Seguici sui social:</p>
        <a href="https://www.facebook.com" target="_blank">
            <img src="logofb.png" alt="Facebook" class="social-icon">
        </a>
        <a href="https://www.instagram.com" target="_blank">
            <img src="logoig.png" alt="Instagram" class="social-icon">
        </a>
    </footer>

    <script>
        // Menu Hamburger per mobile
        document.getElementById('hamburger').addEventListener('click', function() {
            const menu = document.querySelector('nav ul');
            const hamburger = document.getElementById('hamburger');
            // Attiva/disattiva la classe 'active' per l'animazione dell'hamburger e del menu
            menu.classList.toggle('active');
            hamburger.classList.toggle('active');
        });

        // JavaScript per il calendario
        const events = {
            '2025-02-10': 'Evento di esempio 1',
            '2025-02-12': 'Evento speciale il 12 febbraio!',
            '2025-02-15': 'Evento di esempio 2',
            '2025-02-20': 'Evento di esempio 3',
            '2025-03-05': 'Evento di esempio 4',
            '2025-03-10': 'Conferenza su <b>JavaScript</b>',
            '2025-06-20': 'Festa estiva <b>super</b> divertente!',
        };

        let currentDate = new Date();
        let currentMonth = currentDate.getMonth();
        let currentYear = currentDate.getFullYear();
        let selectedDate = null;

        const monthNames = ["Gennaio", "Febbraio", "Marzo", "Aprile", "Maggio", "Giugno", "Luglio", "Agosto", "Settembre", "Ottobre", "Novembre", "Dicembre"];
        const weekdays = ['Lunedì', 'Martedì', 'Mercoledì', 'Giovedì', 'Venerdì', 'Sabato', 'Domenica'];

        function renderCalendar() {
            // Nascondi la descrizione dell'evento quando cambi mese
            const eventBox = document.getElementById('event-box');
            eventBox.style.display = 'none';

            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const monthName = monthNames[currentMonth];
            document.getElementById('calendar-title').textContent = `Scopri gli eventi di ${monthName} ${currentYear}`;
            const numDays = lastDay.getDate();
            let calendarHtml = '';
            for (let i = 0; i < weekdays.length; i++) {
                calendarHtml += `<div class="day">${weekdays[i].slice(0, 3)}</div>`;
            }
            const firstDayOfWeek = (firstDay.getDay() + 6) % 7;
            for (let i = 0; i < firstDayOfWeek; i++) {
                calendarHtml += `<div class="day"></div>`;
            }
            for (let day = 1; day <= numDays; day++) {
                const dateStr = `${currentYear}-${(currentMonth + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                const hasEvent = events[dateStr] ? 'highlighted' : '';
                calendarHtml += `<div class="day ${hasEvent}" data-date="${dateStr}">${day}</div>`;
            }
            const lastDayOfWeek = (firstDay.getDay() + numDays) % 7;
            for (let i = lastDayOfWeek; i < 6; i++) {
                calendarHtml += `<div class="day"></div>`;
            }
            document.getElementById('calendar').innerHTML = calendarHtml;

            const prevButton = document.getElementById('prev-month');
            const nextButton = document.getElementById('next-month');
            prevButton.disabled = currentYear === new Date().getFullYear() && currentMonth <= new Date().getMonth();
            nextButton.disabled = currentYear === new Date().getFullYear() && currentMonth === 11;
        }

        function showEvent(eventDate) {
            const eventDescription = events[eventDate] || 'Non ci sono eventi questo giorno';
            const eventBox = document.getElementById('event-box');
            eventBox.style.display = 'block';
            eventBox.innerHTML = eventDescription;
        }

        document.getElementById('calendar').addEventListener('click', function (event) {
            if (event.target.classList.contains('day') && event.target.dataset.date) {
                const newSelectedDate = event.target.dataset.date;
                if (selectedDate) {
                    const oldSelectedDay = document.querySelector(`[data-date="${selectedDate}"]`);
                    if (oldSelectedDay) {
                        oldSelectedDay.classList.remove('selected');
                    }
                }
                event.target.classList.add('selected');
                selectedDate = newSelectedDate;
                showEvent(selectedDate);
            }
        });

        document.getElementById('prev-month').addEventListener('click', function () {
            if (currentMonth > new Date().getMonth()) {
                currentMonth--;
                renderCalendar();
            }
        });

        document.getElementById('next-month').addEventListener('click', function () {
            if (currentMonth < 11) {
                currentMonth++;
                renderCalendar();
            }
        });

        renderCalendar();

        // Gestione parametro socio (opzionale)
        const urlParams = new URLSearchParams(window.location.search);
        const memberName = urlParams.get('member');
        if (memberName) {
            document.title = `Eventi di ${memberName} - Calendario Eventi`;
            document.getElementById('calendar-title').textContent = `Scopri gli eventi di ${memberName}`;
        }
    </script>
</body>
</html>
