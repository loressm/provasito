<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eventi - Azienda</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="script.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <a href="index.html">
                <img src="logo.png" alt="Logo Azienda">
            </a>
        </div>
        <nav class="navbar">
            <ul>
                <li><a href="chi-siamo.html">Chi Siamo</a></li>
                <li><a href="produzioni.html">Produzioni</a></li>
                <li><a href="calendario-eventi.html">Calendario Eventi</a></li>
                <li><a href="soci.html">I nostri soci</a></li>
                <li><a href="spazi.html">I nostri spazi</a></li>
                <li><a href="contattaci.html">Contattaci</a></li>
            </ul>
        </nav>
        <!-- Hamburger menu for mobile -->
        <div class="hamburger" id="hamburger">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <section class="intro">
            <h2>Eventi</h2>
            <p>Scopri gli eventi che ti interessano! Qui troverai tutti gli eventi filtrati in base ai tuoi criteri.</p>
        </section>

        <!-- Sezione per visualizzare gli eventi filtrati -->
        <section id="eventi">
            <h3>Eventi trovati:</h3>
            <div id="events-list">
                <!-- Gli eventi verranno visualizzati qui tramite JavaScript -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Nome Azienda - Tutti i diritti riservati</p>
        <p class="social-text">Seguici sui social:</p>
        <a href="https://www.facebook.com" target="_blank">
            <img src="logofb.png" alt="Facebook" class="social-icon">
        </a>
        <a href="https://www.instagram.com" target="_blank">
            <img src="logoig.png" alt="Instagram" class="social-icon">
        </a>
    </footer>

    <!-- Codice JavaScript per caricare e filtrare gli eventi -->
    <script>
        // Funzione per ottenere il parametro dalla URL
        function getUrlParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Carica il CSV con PapaParse
        Papa.parse("eventi.csv", {
            download: true,
            complete: function(results) {
                let eventi = results.data;
                let parametro = getUrlParam("socio") || getUrlParam("produzione") || getUrlParam("spazio");
                
                // Filtra gli eventi in base al parametro
                let eventiFiltrati = eventi.filter(evento => {
                    if (getUrlParam("socio")) {
                        return evento.Socio && evento.Socio.includes(parametro); // Filtra per socio
                    }
                    if (getUrlParam("produzione")) {
                        return evento.Produzioni && evento.Produzioni.includes(parametro); // Filtra per produzione
                    }
                    if (getUrlParam("spazio")) {
                        return evento.Spazi && evento.Spazi.includes(parametro); // Filtra per spazio
                    }
                    return true;
                });

                // Visualizza gli eventi filtrati
                let listaEventi = document.getElementById("events-list");
                if (eventiFiltrati.length === 0) {
                    listaEventi.innerHTML = "<p>Non ci sono eventi per questo filtro.</p>";
                } else {
                    eventiFiltrati.forEach(evento => {
                        let eventoDiv = document.createElement("div");
                        eventoDiv.classList.add("evento");
                        eventoDiv.innerHTML = `
                            <h4>${evento.Produzioni}</h4>
                            <p><strong>Data:</strong> ${evento.Data}</p>
                            <p><strong>Socio:</strong> ${evento.Socio}</p>
                            <p><strong>Spazio:</strong> ${evento.Spazi}</p>
                            <p><strong>Descrizione:</strong> ${evento.Descrizione}</p>
                        `;
                        listaEventi.appendChild(eventoDiv);
                    });
                }
            }
        });
    </script>
</body>
</html>
